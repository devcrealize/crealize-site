!function(){"use strict";let e={};e.hamburger&&e.hamburger.addEventListener("click",()=>{e.hamburger.classList.toggle("active"),e.navMenu.classList.toggle("active")}),document.addEventListener("click",t=>{if(t.target.matches('a[href^="#"]')){t.preventDefault();const o=document.querySelector(t.target.getAttribute("href"));if(o&&e.header){const t=e.header.offsetHeight,n=o.offsetTop-t;window.scrollTo({top:n,behavior:"smooth"}),e.hamburger&&e.navMenu&&(e.hamburger.classList.remove("active"),e.navMenu.classList.remove("active"))}}});const t=function(e,t){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),e(...n)},t)}}(()=>{if(e.header){(window.scrollY||window.pageYOffset)>100?(e.header.style.background="rgba(255, 255, 255, 0.98)",e.header.style.boxShadow="0 2px 20px rgba(0, 0, 0, 0.1)"):(e.header.style.background="rgba(255, 255, 255, 0.95)",e.header.style.boxShadow="none")}},10);window.addEventListener("scroll",t);const o=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("animate")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});function n(){e={hamburger:document.querySelector(".hamburger"),navMenu:document.querySelector(".nav-menu"),header:document.querySelector(".header"),contactForm:document.querySelector(".contact-form"),contactFormDetailed:document.querySelector(".contact-form-detailed")};if(document.querySelectorAll(".case-card, .about-content, .contact-content").forEach(e=>{e.classList.add("scroll-animate"),o.observe(e)}),e.contactForm&&e.contactForm.addEventListener("submit",r),e.contactFormDetailed){console.log("contactFormDetailed イベントリスナーを設定しました"),e.contactFormDetailed.addEventListener("submit",a);const t=e.contactFormDetailed.querySelector('button[type="submit"]');t&&(console.log("送信ボタンのイベントリスナーも設定しました"),t.addEventListener("click",function(e){console.log("送信ボタンがクリックされました")}))}else console.log("contactFormDetailed 要素が見つかりませんでした")}function r(e){e.preventDefault();const t=new FormData(this),o=t.get("name"),n=t.get("email"),r=t.get("message");o&&n&&r?c(n)?(s("お問い合わせありがとうございます。後日ご連絡いたします。","success"),this.reset()):s("有効なメールアドレスを入力してください。","error"):s("必須項目を入力してください。","error")}function a(e){console.log("handleDetailedFormSubmit が呼び出されました");const t=new FormData(this),o=t.get("inquiry-type"),n=t.get("name"),r=t.get("email"),a=t.get("message"),s=t.get("privacy");console.log("フォームデータ:",{inquiryType:o,name:n,email:r,message:a,privacy:s}),console.log("各項目の詳細:"),console.log("- inquiryType:",o,"(",typeof o,")"),console.log("- name:",n,"(",typeof n,")"),console.log("- email:",r,"(",typeof r,")"),console.log("- message:",a,"(",typeof a,")"),console.log("- privacy:",s,"(",typeof s,")");const i=[];if(o||i.push("お問い合わせの種類"),n||i.push("お名前"),r||i.push("メールアドレス"),a||i.push("お問い合わせ内容"),s||i.push("個人情報同意"),i.length>0){console.log("バリデーション失敗 - 不足項目:",i),e.preventDefault();const t="必須項目を入力してください。\n\n不足項目:\n"+i.map(e=>"- "+e).join("\n");return console.log("エラーメッセージ:",t),alert(t),!1}if(!c(r))return console.log("メールアドレスバリデーション失敗"),e.preventDefault(),void alert("有効なメールアドレスを入力してください。");console.log("フォーム検証成功、確認ページにリダイレクトします");const l=new URLSearchParams;for(const[e,o]of t.entries())o&&l.append(e,o);e.preventDefault(),alert("フォーム送信成功！確認ページに移動します。"),window.location.href="contact-confirm.html?"+l.toString()}function c(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function s(e,t="info"){const o=document.createElement("div");o.className=`notification notification-${t}`,o.textContent=e,Object.assign(o.style,{position:"fixed",top:"20px",right:"20px",padding:"1rem 1.5rem",borderRadius:"8px",color:"white",fontWeight:"500",zIndex:"1000",transform:"translateX(100%)",transition:"transform 0.3s ease",backgroundColor:"error"===t?"#e74c3c":"success"===t?"#27ae60":"#3498db"}),document.body.appendChild(o),setTimeout(()=>{o.style.transform="translateX(0)"},100),setTimeout(()=>{o.style.transform="translateX(100%)",setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},300)},3e3)}console.log("script-optimized.js が読み込まれました"),"loading"===document.readyState?(console.log("DOM読み込み中、イベントリスナーを設定"),document.addEventListener("DOMContentLoaded",n)):(console.log("DOM既に読み込み完了、即座に初期化"),n())}();